<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Feeling Tracker</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
/* ðŸ”´ PASTE YOUR FIREBASE CONFIG HERE */
const firebaseConfig = {
  apiKey: "PASTE_HERE",
  authDomain: "PASTE_HERE",
  projectId: "PASTE_HERE"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
</script>

<style>
body { font-family: system-ui; padding:20px }
button { margin:6px; padding:10px 14px }
</style>
</head>

<body>

<h2>Feeling Tracker</h2>
<p id="status">Connectingâ€¦</p>

<div id="app" style="display:none">
  <button onclick="save('green')">ðŸŸ¢ Green (Happy)</button>
  <button onclick="save('yellow')">ðŸŸ¡ Yellow (Upset)</button>
  <button onclick="save('red')">ðŸ”´ Red (Angry)</button>
  <button onclick="save('blue')">ðŸ”µ Blue (Tired)</button>

  <h3>Entries</h3>
  <ul id="list"></ul>
</div>

<script>
function autoBreak(zone){
  return (zone === 'red' || zone === 'blue');
}

function save(zone){
  const user = auth.currentUser;
  if(!user) return;

  db.collection("entries").add({
    uid: user.uid,
    zone,
    needBreak: autoBreak(zone),
    time: new Date().toLocaleString()
  });
}

function load(){
  const user = auth.currentUser;
  db.collection("entries")
    .where("uid","==",user.uid)
    .orderBy("time","desc")
    .onSnapshot(snap=>{
      list.innerHTML="";
      snap.forEach(d=>{
        const e=d.data();
        list.innerHTML += `<li>${e.time} â€” ${e.zone} â€” break: ${e.needBreak}</li>`;
      });
    });
}

auth.signInAnonymously();

auth.onAuthStateChanged(user=>{
  if(user){
    status.textContent = "Connected";
    app.style.display = "block";
    load();
  }
});
</script>

</body>
</html>
